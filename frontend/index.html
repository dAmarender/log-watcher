<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AILogsWatcher - Log Monitoring Tool</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #97783a, #6b8a9c);
      color: #ffffff;
      padding: 20px;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      position: relative;
    }

    h1 {
      color: #f1f2eb;
      margin: 0;
      text-shadow: 2px 2px 5px rgba(247, 251, 250, 0.5);
    }

    h2 {
      margin-bottom: 10px;
    }

    .section {
      margin-top: 60px;
      margin-bottom: 30px;
    }

    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      background: #1e1e1e;
      padding: 10px;
      border-radius: 5px;
      max-height: 30vh;
      overflow-y: auto;
      border: 1px solid #eff4f2;
    }

    button {
      margin-top: 10px;
      padding: 10px 15px;
      border: none;
      background: #3f6f6b;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
      margin-right: 10px;
    }

    button:hover {
      background: #9a6026;
    }

    .company-name {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
      font-size: 36px;
      color: #917417;
    }

    .home-page {
      max-width: 800px;
      margin: 0 auto;
      text-align: left;
      padding: 20px;
    }

    .home-page h2 {
      color: #fdfefe;
    }

    .home-page p {
      font-size: 18px;
      margin-top: 20px;
    }

    .home-page .features-list {
      list-style-type: none;
      padding: 0;
      margin-top: 30px;
    }

    .home-page .features-list li {
      margin: 10px 0;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <!-- Make the logo clickable -->
  <div class="company-name">
    <a href="index.html" style="text-decoration: none; display: flex; align-items: center; gap: 10px;">
      <span style="font-size: 36px; font-family: 'Arial Black', sans-serif; font-weight: bold;"></span>
        <span style="color: #0a710a; font-weight: bold;">AI</span><span style="color: #3f3c3c;">LogsWatcher</span>
      </span>
    </a>
  </div>

  <!-- Homepage Section -->
  <div class="home-page">
    <h2>Welcome to AILogsWatcher</h2>
    <p>AILogsWatcher is an advanced tool that allows you to monitor Vault logs, detect issues in real-time, and suggest resolutions automatically. Stay on top of your Vault instance and ensure smooth operations with the power of AI!</p>
    <p>With AILogsWatcher, you can:</p>
    <ul class="features-list">
      <li>üîç Monitor Vault logs live</li>
      <li>‚ö†Ô∏è Automatically detect issues and errors</li>
      <li>üõ† Get suggested resolutions to issues</li>
      <li>üí° Improve system uptime and security</li>
    </ul>
    <p>Click below to start using AILogsWatcher to enhance your Vault management!</p>
    <button onclick="startMonitoring()">Start Monitoring</button>
  </div>

  <!-- Logs Section (Hidden initially) -->
  <div id="logsSection" style="display: none;">
    <div class="section" style="margin-top: 80px;">
      <h2>üîÑ Live Vault Logs</h2>
      <pre id="log">Loading...</pre>
    </div>

    <div class="section">
      <h2>‚ö†Ô∏è Detected Issues</h2>
      <pre id="errors">Analyzing logs...</pre>
    </div>

    <div class="section">
      <h2>üõ† Suggested Resolutions</h2>
      <pre id="resolutions">Waiting for issues...</pre>
    </div>

    <button onclick="fetchLogs()">Refresh Logs</button>
    <button id="toggleBtn" onclick="toggleAutoRefresh()">Pause Auto Refresh</button>
  </div>

  <script>
    let autoRefresh = true;
    let intervalId = null;

    const errorEl = document.getElementById("errors");
    const resolutionEl = document.getElementById("resolutions");

    async function fetchLogs() {
      try {
        const logsResponse = await fetch("http://localhost:8000/logs?limit=100");
        const logs = await logsResponse.json();
        const logEl = document.getElementById("log");

        const isAtBottom = logEl.scrollTop + logEl.clientHeight >= logEl.scrollHeight - 50;
        logEl.innerText = logs.join("\n");

        if (isAtBottom) {
          logEl.scrollTop = logEl.scrollHeight;
        }

        const errors = logs.filter(line =>
          /error|failed|vault is sealed|revoked lease|root generation initialized|invalid token|token expired|token renewal failed|token valid|token revoke/i.test(line)
        );

        // Fetch error resolutions from the errors.json file
        const resolutionsResponse = await fetch("http://localhost:8000/resolutions");
        const resolutionsData = await resolutionsResponse.json();

        // Display detected errors
        errorEl.innerText = errors.length ? errors.join("\n") : "‚úÖ No errors found";

        // Map resolutions based on errors
        const resolutions = errors.map(error => {
          const matchingResolution = resolutionsData.find(res => error.match(new RegExp(res.error, "i")));
          return matchingResolution ? matchingResolution.resolution : "‚Üí Investigate the issue manually.";
        });

        // Display the resolutions
        resolutionEl.innerText = resolutions.length ? resolutions.join("\n") : "‚úÖ No issues to resolve.";
      } catch (err) {
        console.error("Failed to fetch logs or resolutions", err);
      }
    }

    function toggleAutoRefresh() {
      autoRefresh = !autoRefresh;
      const btn = document.getElementById("toggleBtn");
      if (autoRefresh) {
        intervalId = setInterval(fetchLogs, 1000);
        btn.innerText = "Pause Auto Refresh";
      } else {
        clearInterval(intervalId);
        btn.innerText = "Resume Auto Refresh";
      }
    }

    function startMonitoring() {
      document.querySelector(".home-page").style.display = "none";
      document.getElementById("logsSection").style.display = "block";
      fetchLogs();
      intervalId = setInterval(fetchLogs, 1000);
    }
  </script>
</body>
</html> -->









<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AILogsWatcher</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #6b8758;
      color: #ffffff;
      padding: 20px;
    }
    h1 {
      color: #fdfefe;
      margin: 0;
    }
    h2 {
      margin-bottom: 10px;
    }
    .section {
      margin-top: 60px;
      margin-bottom: 30px;
    }
    pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      background: #1e1e1e;
      padding: 10px;
      border-radius: 5px;
      max-height: 30vh;
      overflow-y: auto;
      border: 1px solid #eff4f2;
    }
    button {
      margin-top: 10px;
      padding: 10px 15px;
      border: none;
      background: #f5f8f7;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      border-radius: 5px;
      margin-right: 10px;
    }
    button:hover {
      background: #00cc70;
    }
    .company-name {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 24px;
      color: #00ff90;
    }
  </style>
</head>
<body>
  <div class="company-name">
    <h1>AILogsWatcher</h1>
  </div>

  <div class="section" style="margin-top: 80px;">
    <h2>üîÑ Live Vault Logs</h2>
    <pre id="log">Loading...</pre>
  </div>

  <div class="section">
    <h2>‚ö†Ô∏è Detected Issues</h2>
    <pre id="errors">Analyzing logs...</pre>
  </div>

  <div class="section">
    <h2>üõ† Suggested Resolutions</h2>
    <pre id="resolutions">Waiting for issues...</pre>
  </div>

  <button onclick="fetchLogs()">Refresh Logs</button>
  <button id="toggleBtn" onclick="toggleAutoRefresh()">Pause Auto Refresh</button>

  <script>
    let autoRefresh = true;
    let intervalId = null;

    const errorEl = document.getElementById("errors");
    const resolutionEl = document.getElementById("resolutions");

    async function fetchLogs() {
      try {
        const logsResponse = await fetch("http://localhost:8000/logs?limit=100");
        const logs = await logsResponse.json();
        const logEl = document.getElementById("log");

        const isAtBottom = logEl.scrollTop + logEl.clientHeight >= logEl.scrollHeight - 50;
        logEl.innerText = logs.join("\n");

        if (isAtBottom) {
          logEl.scrollTop = logEl.scrollHeight;
        }

        const errors = logs.filter(line =>
          /error|failed|vault is sealed|revoked lease|root generation initialized|invalid token|token expired|token renewal failed|token valid|token revoke/i.test(line)
        );

        // Fetch error resolutions from the errors.json file
        const resolutionsResponse = await fetch("http://localhost:8000/resolutions");
        const resolutionsData = await resolutionsResponse.json();

        // Display detected errors
        errorEl.innerText = errors.length ? errors.join("\n") : "‚úÖ No errors found";

        // Map resolutions based on errors
        const resolutions = errors.map(error => {
          const matchingResolution = resolutionsData.find(res => error.match(new RegExp(res.error, "i")));
          return matchingResolution ? matchingResolution.resolution : "‚Üí Investigate the issue manually.";
        });

        // Display the resolutions
        resolutionEl.innerText = resolutions.length ? resolutions.join("\n") : "‚úÖ No issues to resolve.";
      } catch (err) {
        console.error("Failed to fetch logs or resolutions", err);
      }
    }

    function toggleAutoRefresh() {
      autoRefresh = !autoRefresh;
      const btn = document.getElementById("toggleBtn");
      if (autoRefresh) {
        intervalId = setInterval(fetchLogs, 1000);
        btn.innerText = "Pause Auto Refresh";
      } else {
        clearInterval(intervalId);
        btn.innerText = "Resume Auto Refresh";
      }
    }

    fetchLogs();
    intervalId = setInterval(fetchLogs, 1000);
  </script>
</body>
</html> -->
